'use strict';var require$$0=require("os"),require$$0$1=require("fs"),crypto=require("crypto"),require$$0$2=require("path"),require$$2$1=require("http"),require$$3=require("https"),require$$1=require("tls"),require$$4=require("events"),require$$6=require("util"),commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};
function getAugmentedNamespace(a){if(a.__esModule)return a;var c=a.default;if("function"==typeof c){var e=function g(){return this instanceof g?Reflect.construct(c,arguments,this.constructor):c.apply(this,arguments)};e.prototype=c.prototype}else e={};Object.defineProperty(e,"__esModule",{value:!0});Object.keys(a).forEach(function(h){var g=Object.getOwnPropertyDescriptor(a,h);Object.defineProperty(e,h,g.get?g:{enumerable:!0,get:function(){return a[h]}})});return e}var core={},command={},utils={};
Object.defineProperty(utils,"__esModule",{value:!0});utils.toCommandProperties=utils.toCommandValue=void 0;function toCommandValue(a){return null===a||void 0===a?"":"string"===typeof a||a instanceof String?a:JSON.stringify(a)}utils.toCommandValue=toCommandValue;function toCommandProperties(a){return Object.keys(a).length?{title:a.title,file:a.file,line:a.startLine,endLine:a.endLine,col:a.startColumn,endColumn:a.endColumn}:{}}utils.toCommandProperties=toCommandProperties;
var __createBinding$1=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(a,c,e,h){void 0===h&&(h=e);Object.defineProperty(a,h,{enumerable:!0,get:function(){return c[e]}})}:function(a,c,e,h){void 0===h&&(h=e);a[h]=c[e]}),__setModuleDefault$1=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(a,c){Object.defineProperty(a,"default",{enumerable:!0,value:c})}:function(a,c){a["default"]=c}),__importStar$1=commonjsGlobal&&commonjsGlobal.__importStar||function(a){if(a&&
a.__esModule)return a;var c={};if(null!=a)for(var e in a)"default"!==e&&Object.hasOwnProperty.call(a,e)&&__createBinding$1(c,a,e);__setModuleDefault$1(c,a);return c};Object.defineProperty(command,"__esModule",{value:!0});command.issue=command.issueCommand=void 0;let os$1=__importStar$1(require$$0),utils_1$1=utils;function issueCommand(a,c,e){a=new Command(a,c,e);process.stdout.write(a.toString()+os$1.EOL)}command.issueCommand=issueCommand;function issue(a,c=""){issueCommand(a,{},c)}
command.issue=issue;let CMD_STRING="::";class Command{constructor(a,c,e){a||(a="missing.command");this.command=a;this.properties=c;this.message=e}toString(){let a=CMD_STRING+this.command;if(this.properties&&0<Object.keys(this.properties).length){a+=" ";let c=!0;for(let e in this.properties)if(this.properties.hasOwnProperty(e)){let h=this.properties[e];h&&(c?c=!1:a+=",",a+=`${e}=${escapeProperty(h)}`)}}return a+=`${CMD_STRING}${escapeData(this.message)}`}}
function escapeData(a){return utils_1$1.toCommandValue(a).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function escapeProperty(a){return utils_1$1.toCommandValue(a).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}var fileCommand={};let rnds8Pool=new Uint8Array(256),poolPtr=rnds8Pool.length;function rng(){poolPtr>rnds8Pool.length-16&&(crypto.randomFillSync(rnds8Pool),poolPtr=0);return rnds8Pool.slice(poolPtr,poolPtr+=16)}
var REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function validate(a){return"string"===typeof a&&REGEX.test(a)}let byteToHex=[];for(let a=0;256>a;++a)byteToHex.push((a+256).toString(16).substr(1));
function stringify(a,c=0){a=(byteToHex[a[c+0]]+byteToHex[a[c+1]]+byteToHex[a[c+2]]+byteToHex[a[c+3]]+"-"+byteToHex[a[c+4]]+byteToHex[a[c+5]]+"-"+byteToHex[a[c+6]]+byteToHex[a[c+7]]+"-"+byteToHex[a[c+8]]+byteToHex[a[c+9]]+"-"+byteToHex[a[c+10]]+byteToHex[a[c+11]]+byteToHex[a[c+12]]+byteToHex[a[c+13]]+byteToHex[a[c+14]]+byteToHex[a[c+15]]).toLowerCase();if(!validate(a))throw TypeError("Stringified UUID is invalid");return a}let _nodeId,_clockseq,_lastMSecs=0,_lastNSecs=0;
function v1(a,c,e){e=c&&e||0;let h=c||Array(16);a=a||{};let g=a.node||_nodeId;var m=void 0!==a.clockseq?a.clockseq:_clockseq;if(null==g||null==m){var n=a.random||(a.rng||rng)();null==g&&(g=_nodeId=[n[0]|1,n[1],n[2],n[3],n[4],n[5]]);null==m&&(m=_clockseq=(n[6]<<8|n[7])&16383)}n=void 0!==a.msecs?a.msecs:Date.now();let q=void 0!==a.nsecs?a.nsecs:_lastNSecs+1,r=n-_lastMSecs+(q-_lastNSecs)/1E4;0>r&&void 0===a.clockseq&&(m=m+1&16383);(0>r||n>_lastMSecs)&&void 0===a.nsecs&&(q=0);if(1E4<=q)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");
_lastMSecs=n;_lastNSecs=q;_clockseq=m;n+=122192928E5;a=(1E4*(n&268435455)+q)%4294967296;h[e++]=a>>>24&255;h[e++]=a>>>16&255;h[e++]=a>>>8&255;h[e++]=a&255;a=n/4294967296*1E4&268435455;h[e++]=a>>>8&255;h[e++]=a&255;h[e++]=a>>>24&15|16;h[e++]=a>>>16&255;h[e++]=m>>>8|128;h[e++]=m&255;for(m=0;6>m;++m)h[e+m]=g[m];return c||stringify(h)}
function parse(a){if(!validate(a))throw TypeError("Invalid UUID");let c,e=new Uint8Array(16);e[0]=(c=parseInt(a.slice(0,8),16))>>>24;e[1]=c>>>16&255;e[2]=c>>>8&255;e[3]=c&255;e[4]=(c=parseInt(a.slice(9,13),16))>>>8;e[5]=c&255;e[6]=(c=parseInt(a.slice(14,18),16))>>>8;e[7]=c&255;e[8]=(c=parseInt(a.slice(19,23),16))>>>8;e[9]=c&255;e[10]=(c=parseInt(a.slice(24,36),16))/1099511627776&255;e[11]=c/4294967296&255;e[12]=c>>>24&255;e[13]=c>>>16&255;e[14]=c>>>8&255;e[15]=c&255;return e}
function stringToBytes(a){a=unescape(encodeURIComponent(a));let c=[];for(let e=0;e<a.length;++e)c.push(a.charCodeAt(e));return c}let DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",URL$1="6ba7b811-9dad-11d1-80b4-00c04fd430c8";
function v35(a,c,e){function h(g,m,n,q){"string"===typeof g&&(g=stringToBytes(g));"string"===typeof m&&(m=parse(m));if(16!==m.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let r=new Uint8Array(16+g.length);r.set(m);r.set(g,m.length);r=e(r);r[6]=r[6]&15|c;r[8]=r[8]&63|128;if(n){q=q||0;for(g=0;16>g;++g)n[q+g]=r[g];return n}return stringify(r)}try{h.name=a}catch(g){}h.DNS=DNS;h.URL=URL$1;return h}
function md5(a){Array.isArray(a)?a=Buffer.from(a):"string"===typeof a&&(a=Buffer.from(a,"utf8"));return crypto.createHash("md5").update(a).digest()}let v3=v35("v3",48,md5);var v3$1=v3;function v4(a,c,e){a=a||{};a=a.random||(a.rng||rng)();a[6]=a[6]&15|64;a[8]=a[8]&63|128;if(c){e=e||0;for(let h=0;16>h;++h)c[e+h]=a[h];return c}return stringify(a)}function sha1(a){Array.isArray(a)?a=Buffer.from(a):"string"===typeof a&&(a=Buffer.from(a,"utf8"));return crypto.createHash("sha1").update(a).digest()}
let v5=v35("v5",80,sha1);var v5$1=v5,nil="00000000-0000-0000-0000-000000000000";function version(a){if(!validate(a))throw TypeError("Invalid UUID");return parseInt(a.substr(14,1),16)}
var esmNode=Object.freeze({__proto__:null,NIL:nil,parse,stringify,v1,v3:v3$1,v4,v5:v5$1,validate,version}),require$$2=getAugmentedNamespace(esmNode),__createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(a,c,e,h){void 0===h&&(h=e);Object.defineProperty(a,h,{enumerable:!0,get:function(){return c[e]}})}:function(a,c,e,h){void 0===h&&(h=e);a[h]=c[e]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(a,c){Object.defineProperty(a,
"default",{enumerable:!0,value:c})}:function(a,c){a["default"]=c}),__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var e in a)"default"!==e&&Object.hasOwnProperty.call(a,e)&&__createBinding(c,a,e);__setModuleDefault(c,a);return c};Object.defineProperty(fileCommand,"__esModule",{value:!0});fileCommand.prepareKeyValueMessage=fileCommand.issueFileCommand=void 0;
let fs=__importStar(require$$0$1),os=__importStar(require$$0),uuid_1=require$$2,utils_1=utils;function issueFileCommand(a,c){let e=process.env[`GITHUB_${a}`];if(!e)throw Error(`Unable to find environment variable for file command ${a}`);if(!fs.existsSync(e))throw Error(`Missing file at path: ${e}`);fs.appendFileSync(e,`${utils_1.toCommandValue(c)}${os.EOL}`,{encoding:"utf8"})}fileCommand.issueFileCommand=issueFileCommand;
function prepareKeyValueMessage(a,c){let e=`ghadelimiter_${uuid_1.v4()}`;c=utils_1.toCommandValue(c);if(a.includes(e))throw Error(`Unexpected input: name should not contain the delimiter "${e}"`);if(c.includes(e))throw Error(`Unexpected input: value should not contain the delimiter "${e}"`);return`${a}<<${e}${os.EOL}${c}${os.EOL}${e}`}fileCommand.prepareKeyValueMessage=prepareKeyValueMessage;var oidcUtils={},lib={},proxy={};Object.defineProperty(proxy,"__esModule",{value:!0});
proxy.checkBypass=proxy.getProxyUrl=void 0;function getProxyUrl(a){let c="https:"===a.protocol;if(!checkBypass(a)&&(a=c?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY,a))return new URL(a)}proxy.getProxyUrl=getProxyUrl;
function checkBypass(a){if(!a.hostname)return!1;if(isLoopbackAddress(a.hostname))return!0;let c=process.env.no_proxy||process.env.NO_PROXY||"";if(!c)return!1;let e;a.port?e=Number(a.port):"http:"===a.protocol?e=80:"https:"===a.protocol&&(e=443);a=[a.hostname.toUpperCase()];"number"===typeof e&&a.push(`${a[0]}:${e}`);for(let h of c.split(",").map(g=>g.trim().toUpperCase()).filter(g=>g))if("*"===h||a.some(g=>g===h||g.endsWith(`.${h}`)||h.startsWith(".")&&g.endsWith(`${h}`)))return!0;return!1}
proxy.checkBypass=checkBypass;function isLoopbackAddress(a){a=a.toLowerCase();return"localhost"===a||a.startsWith("127.")||a.startsWith("[::1]")||a.startsWith("[0:0:0:0:0:0:0:1]")}var tunnel$1={},tls=require$$1,http=require$$2$1,https=require$$3,events=require$$4,util=require$$6;tunnel$1.httpOverHttp=httpOverHttp;tunnel$1.httpsOverHttp=httpsOverHttp;tunnel$1.httpOverHttps=httpOverHttps;tunnel$1.httpsOverHttps=httpsOverHttps;
function httpOverHttp(a){a=new TunnelingAgent(a);a.request=http.request;return a}function httpsOverHttp(a){a=new TunnelingAgent(a);a.request=http.request;a.createSocket=createSecureSocket;a.defaultPort=443;return a}function httpOverHttps(a){a=new TunnelingAgent(a);a.request=https.request;return a}function httpsOverHttps(a){a=new TunnelingAgent(a);a.request=https.request;a.createSocket=createSecureSocket;a.defaultPort=443;return a}
function TunnelingAgent(a){var c=this;c.options=a||{};c.proxyOptions=c.options.proxy||{};c.maxSockets=c.options.maxSockets||http.Agent.defaultMaxSockets;c.requests=[];c.sockets=[];c.on("free",function(e,h,g,m){h=toOptions(h,g,m);g=0;for(m=c.requests.length;g<m;++g){var n=c.requests[g];if(n.host===h.host&&n.port===h.port){c.requests.splice(g,1);n.request.onSocket(e);return}}e.destroy();c.removeSocket(e)})}util.inherits(TunnelingAgent,events.EventEmitter);
TunnelingAgent.prototype.addRequest=function(a,c,e,h){var g=this,m=mergeOptions({request:a},g.options,toOptions(c,e,h));g.sockets.length>=this.maxSockets?g.requests.push(m):g.createSocket(m,function(n){function q(){g.emit("free",n,m)}function r(l){g.removeSocket(n);n.removeListener("free",q);n.removeListener("close",r);n.removeListener("agentRemove",r)}n.on("free",q);n.on("close",r);n.on("agentRemove",r);a.onSocket(n)})};
TunnelingAgent.prototype.createSocket=function(a,c){function e(q,r,l){n.removeAllListeners();r.removeAllListeners();if(200!==q.statusCode)debug("tunneling socket could not be established, statusCode=%d",q.statusCode),r.destroy(),q=Error("tunneling socket could not be established, statusCode="+q.statusCode),q.code="ECONNRESET",a.request.emit("error",q),h.removeSocket(g);else if(0<l.length)debug("got illegal response body from proxy"),r.destroy(),q=Error("got illegal response body from proxy"),q.code=
"ECONNRESET",a.request.emit("error",q),h.removeSocket(g);else return debug("tunneling connection has established"),h.sockets[h.sockets.indexOf(g)]=r,c(r)}var h=this,g={};h.sockets.push(g);var m=mergeOptions({},h.proxyOptions,{method:"CONNECT",path:a.host+":"+a.port,agent:!1,headers:{host:a.host+":"+a.port}});a.localAddress&&(m.localAddress=a.localAddress);m.proxyAuth&&(m.headers=m.headers||{},m.headers["Proxy-Authorization"]="Basic "+(new Buffer(m.proxyAuth)).toString("base64"));debug("making CONNECT request");
var n=h.request(m);n.useChunkedEncodingByDefault=!1;n.once("response",function(q){q.upgrade=!0});n.once("upgrade",function(q,r,l){process.nextTick(function(){e(q,r,l)})});n.once("connect",e);n.once("error",function(q){n.removeAllListeners();debug("tunneling socket could not be established, cause=%s\n",q.message,q.stack);q=Error("tunneling socket could not be established, cause="+q.message);q.code="ECONNRESET";a.request.emit("error",q);h.removeSocket(g)});n.end()};
TunnelingAgent.prototype.removeSocket=function(a){a=this.sockets.indexOf(a);if(-1!==a){this.sockets.splice(a,1);var c=this.requests.shift();c&&this.createSocket(c,function(e){c.request.onSocket(e)})}};function createSecureSocket(a,c){var e=this;TunnelingAgent.prototype.createSocket.call(e,a,function(h){var g=a.request.getHeader("host");g=mergeOptions({},e.options,{socket:h,servername:g?g.replace(/:.*$/,""):a.host});g=tls.connect(0,g);e.sockets[e.sockets.indexOf(h)]=g;c(g)})}
function toOptions(a,c,e){return"string"===typeof a?{host:a,port:c,localAddress:e}:a}function mergeOptions(a){for(var c=1,e=arguments.length;c<e;++c){var h=arguments[c];if("object"===typeof h)for(var g=Object.keys(h),m=0,n=g.length;m<n;++m){var q=g[m];void 0!==h[q]&&(a[q]=h[q])}}return a}var debug;
debug=process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?function(){var a=Array.prototype.slice.call(arguments);"string"===typeof a[0]?a[0]="TUNNEL: "+a[0]:a.unshift("TUNNEL:");console.error.apply(console,a)}:function(){};tunnel$1.debug=debug;var tunnel=tunnel$1;
(function(a){var c=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(b,d,f,k){void 0===k&&(k=f);Object.defineProperty(b,k,{enumerable:!0,get:function(){return d[f]}})}:function(b,d,f,k){void 0===k&&(k=f);b[k]=d[f]}),e=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(b,d){Object.defineProperty(b,"default",{enumerable:!0,value:d})}:function(b,d){b["default"]=d}),h=commonjsGlobal&&commonjsGlobal.__importStar||function(b){if(b&&b.__esModule)return b;var d=
{};if(null!=b)for(var f in b)"default"!==f&&Object.hasOwnProperty.call(b,f)&&c(d,b,f);e(d,b);return d},g=commonjsGlobal&&commonjsGlobal.__awaiter||function(b,d,f,k){function y(u){return u instanceof f?u:new f(function(v){v(u)})}return new (f||(f=Promise))(function(u,v){function D(w){try{C(k.next(w))}catch(F){v(F)}}function x(w){try{C(k["throw"](w))}catch(F){v(F)}}function C(w){w.done?u(w.value):y(w.value).then(D,x)}C((k=k.apply(b,d||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0});
a.HttpClient=a.isHttps=a.HttpClientResponse=a.HttpClientError=a.getProxyUrl=a.MediaTypes=a.Headers=a.HttpCodes=void 0;let m=h(require$$2$1),n=h(require$$3),q=h(proxy),r=h(tunnel);var l;(function(b){b[b.OK=200]="OK";b[b.MultipleChoices=300]="MultipleChoices";b[b.MovedPermanently=301]="MovedPermanently";b[b.ResourceMoved=302]="ResourceMoved";b[b.SeeOther=303]="SeeOther";b[b.NotModified=304]="NotModified";b[b.UseProxy=305]="UseProxy";b[b.SwitchProxy=306]="SwitchProxy";b[b.TemporaryRedirect=307]="TemporaryRedirect";
b[b.PermanentRedirect=308]="PermanentRedirect";b[b.BadRequest=400]="BadRequest";b[b.Unauthorized=401]="Unauthorized";b[b.PaymentRequired=402]="PaymentRequired";b[b.Forbidden=403]="Forbidden";b[b.NotFound=404]="NotFound";b[b.MethodNotAllowed=405]="MethodNotAllowed";b[b.NotAcceptable=406]="NotAcceptable";b[b.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired";b[b.RequestTimeout=408]="RequestTimeout";b[b.Conflict=409]="Conflict";b[b.Gone=410]="Gone";b[b.TooManyRequests=429]="TooManyRequests";
b[b.InternalServerError=500]="InternalServerError";b[b.NotImplemented=501]="NotImplemented";b[b.BadGateway=502]="BadGateway";b[b.ServiceUnavailable=503]="ServiceUnavailable";b[b.GatewayTimeout=504]="GatewayTimeout"})(l=a.HttpCodes||(a.HttpCodes={}));var p;(function(b){b.Accept="accept";b.ContentType="content-type"})(p=a.Headers||(a.Headers={}));var t;(t=a.MediaTypes||(a.MediaTypes={})).ApplicationJson="application/json";a.getProxyUrl=function(b){return(b=q.getProxyUrl(new URL(b)))?b.href:""};let A=
[l.MovedPermanently,l.ResourceMoved,l.SeeOther,l.TemporaryRedirect,l.PermanentRedirect],E=[l.BadGateway,l.ServiceUnavailable,l.GatewayTimeout],B=["OPTIONS","GET","DELETE","HEAD"];class z extends Error{constructor(b,d){super(b);this.name="HttpClientError";this.statusCode=d;Object.setPrototypeOf(this,z.prototype)}}a.HttpClientError=z;class G{constructor(b){this.message=b}readBody(){return g(this,void 0,void 0,function*(){return new Promise(b=>g(this,void 0,void 0,function*(){let d=Buffer.alloc(0);this.message.on("data",
f=>{d=Buffer.concat([d,f])});this.message.on("end",()=>{b(d.toString())})}))})}}a.HttpClientResponse=G;a.isHttps=function(b){return"https:"===(new URL(b)).protocol};class I{constructor(b,d,f){this._ignoreSslError=!1;this._allowRedirects=!0;this._allowRedirectDowngrade=!1;this._maxRedirects=50;this._allowRetries=!1;this._maxRetries=1;this._disposed=this._keepAlive=!1;this.userAgent=b;this.handlers=d||[];if(this.requestOptions=f)null!=f.ignoreSslError&&(this._ignoreSslError=f.ignoreSslError),this._socketTimeout=
f.socketTimeout,null!=f.allowRedirects&&(this._allowRedirects=f.allowRedirects),null!=f.allowRedirectDowngrade&&(this._allowRedirectDowngrade=f.allowRedirectDowngrade),null!=f.maxRedirects&&(this._maxRedirects=Math.max(f.maxRedirects,0)),null!=f.keepAlive&&(this._keepAlive=f.keepAlive),null!=f.allowRetries&&(this._allowRetries=f.allowRetries),null!=f.maxRetries&&(this._maxRetries=f.maxRetries)}options(b,d){return g(this,void 0,void 0,function*(){return this.request("OPTIONS",b,null,d||{})})}get(b,
d){return g(this,void 0,void 0,function*(){return this.request("GET",b,null,d||{})})}del(b,d){return g(this,void 0,void 0,function*(){return this.request("DELETE",b,null,d||{})})}post(b,d,f){return g(this,void 0,void 0,function*(){return this.request("POST",b,d,f||{})})}patch(b,d,f){return g(this,void 0,void 0,function*(){return this.request("PATCH",b,d,f||{})})}put(b,d,f){return g(this,void 0,void 0,function*(){return this.request("PUT",b,d,f||{})})}head(b,d){return g(this,void 0,void 0,function*(){return this.request("HEAD",
b,null,d||{})})}sendStream(b,d,f,k){return g(this,void 0,void 0,function*(){return this.request(b,d,f,k)})}getJson(b,d={}){return g(this,void 0,void 0,function*(){d[p.Accept]=this._getExistingOrDefaultHeader(d,p.Accept,t.ApplicationJson);let f=yield this.get(b,d);return this._processResponse(f,this.requestOptions)})}postJson(b,d,f={}){return g(this,void 0,void 0,function*(){var k=JSON.stringify(d,null,2);f[p.Accept]=this._getExistingOrDefaultHeader(f,p.Accept,t.ApplicationJson);f[p.ContentType]=this._getExistingOrDefaultHeader(f,
p.ContentType,t.ApplicationJson);k=yield this.post(b,k,f);return this._processResponse(k,this.requestOptions)})}putJson(b,d,f={}){return g(this,void 0,void 0,function*(){var k=JSON.stringify(d,null,2);f[p.Accept]=this._getExistingOrDefaultHeader(f,p.Accept,t.ApplicationJson);f[p.ContentType]=this._getExistingOrDefaultHeader(f,p.ContentType,t.ApplicationJson);k=yield this.put(b,k,f);return this._processResponse(k,this.requestOptions)})}patchJson(b,d,f={}){return g(this,void 0,void 0,function*(){var k=
JSON.stringify(d,null,2);f[p.Accept]=this._getExistingOrDefaultHeader(f,p.Accept,t.ApplicationJson);f[p.ContentType]=this._getExistingOrDefaultHeader(f,p.ContentType,t.ApplicationJson);k=yield this.patch(b,k,f);return this._processResponse(k,this.requestOptions)})}request(b,d,f,k){return g(this,void 0,void 0,function*(){if(this._disposed)throw Error("Client has already been disposed.");let y=new URL(d);var u=this._prepareRequest(b,y,k);let v=this._allowRetries&&B.includes(b)?this._maxRetries+1:1,
D=0,x;do{if((x=yield this.requestRaw(u,f))&&x.message&&x.message.statusCode===l.Unauthorized){let w;for(let F of this.handlers)if(F.canHandleAuthentication(x)){w=F;break}if(w)return w.handleAuthentication(this,u,f);break}let C=this._maxRedirects;for(;x.message.statusCode&&A.includes(x.message.statusCode)&&this._allowRedirects&&0<C;){let w=x.message.headers.location;if(!w)break;u=new URL(w);if("https:"===y.protocol&&y.protocol!==u.protocol&&!this._allowRedirectDowngrade)throw Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");
yield x.readBody();if(u.hostname!==y.hostname)for(let F in k)"authorization"===F.toLowerCase()&&delete k[F];u=this._prepareRequest(b,u,k);x=yield this.requestRaw(u,f);C--}if(!x.message.statusCode||!E.includes(x.message.statusCode))break;D+=1;D<v&&(yield x.readBody(),yield this._performExponentialBackoff(D))}while(D<v);return x})}dispose(){this._agent&&this._agent.destroy();this._disposed=!0}requestRaw(b,d){return g(this,void 0,void 0,function*(){return new Promise((f,k)=>{this.requestRawWithCallback(b,
d,function(y,u){y?k(y):u?f(u):k(Error("Unknown error"))})})})}requestRawWithCallback(b,d,f){"string"===typeof d&&(b.options.headers||(b.options.headers={}),b.options.headers["Content-Length"]=Buffer.byteLength(d,"utf8"));let k=!1,y=b.httpModule.request(b.options,v=>{v=new G(v);k||(k=!0,f(void 0,v))}),u;y.on("socket",v=>{u=v});y.setTimeout(this._socketTimeout||18E4,()=>{u&&u.end();var v=Error(`Request timeout: ${b.options.path}`);k||(k=!0,f(v,void 0))});y.on("error",function(v){k||(k=!0,f(v,void 0))});
d&&"string"===typeof d&&y.write(d,"utf8");d&&"string"!==typeof d?(d.on("close",function(){y.end()}),d.pipe(y)):y.end()}getAgent(b){b=new URL(b);return this._getAgent(b)}_prepareRequest(b,d,f){let k={};k.parsedUrl=d;d="https:"===k.parsedUrl.protocol;k.httpModule=d?n:m;d=d?443:80;k.options={};k.options.host=k.parsedUrl.hostname;k.options.port=k.parsedUrl.port?parseInt(k.parsedUrl.port):d;k.options.path=(k.parsedUrl.pathname||"")+(k.parsedUrl.search||"");k.options.method=b;k.options.headers=this._mergeHeaders(f);
null!=this.userAgent&&(k.options.headers["user-agent"]=this.userAgent);k.options.agent=this._getAgent(k.parsedUrl);if(this.handlers)for(let y of this.handlers)y.prepareRequest(k.options);return k}_mergeHeaders(b){return this.requestOptions&&this.requestOptions.headers?Object.assign({},H(this.requestOptions.headers),H(b||{})):H(b||{})}_getExistingOrDefaultHeader(b,d,f){let k;this.requestOptions&&this.requestOptions.headers&&(k=H(this.requestOptions.headers)[d]);return b[d]||k||f}_getAgent(b){var d=
q.getProxyUrl(b),f=d&&d.hostname;if(this._keepAlive&&f)var k=this._proxyAgent;this._keepAlive&&!f&&(k=this._agent);if(k)return k;b="https:"===b.protocol;f=100;this.requestOptions&&(f=this.requestOptions.maxSockets||m.globalAgent.maxSockets);d&&d.hostname&&(k={maxSockets:f,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(d.username||d.password)&&{proxyAuth:`${d.username}:${d.password}`}),{host:d.hostname,port:d.port})},d="https:"===d.protocol,this._proxyAgent=k=(b?d?r.httpsOverHttps:
r.httpsOverHttp:d?r.httpOverHttps:r.httpOverHttp)(k));this._keepAlive&&!k&&(d={keepAlive:this._keepAlive,maxSockets:f},this._agent=k=b?new n.Agent(d):new m.Agent(d));k||(k=b?n.globalAgent:m.globalAgent);b&&this._ignoreSslError&&(k.options=Object.assign(k.options||{},{rejectUnauthorized:!1}));return k}_performExponentialBackoff(b){return g(this,void 0,void 0,function*(){b=Math.min(10,b);let d=5*Math.pow(2,b);return new Promise(f=>setTimeout(()=>f(),d))})}_processResponse(b,d){return g(this,void 0,
void 0,function*(){return new Promise((f,k)=>g(this,void 0,void 0,function*(){function y(C,w){return"string"!==typeof w||(C=new Date(w),isNaN(C.valueOf()))?w:C}var u=b.message.statusCode||0;let v={statusCode:u,result:null,headers:{}};u===l.NotFound&&f(v);let D,x;try{(x=yield b.readBody())&&0<x.length&&(D=d&&d.deserializeDates?JSON.parse(x,y):JSON.parse(x),v.result=D),v.headers=b.message.headers}catch(C){}299<u?(u=new z(D&&D.message?D.message:x&&0<x.length?x:`Failed request: (${u})`,u),u.result=v.result,
k(u)):f(v)}))})}}a.HttpClient=I;let H=b=>Object.keys(b).reduce((d,f)=>(d[f.toLowerCase()]=b[f],d),{})})(lib);var auth={},__awaiter=commonjsGlobal&&commonjsGlobal.__awaiter||function(a,c,e,h){function g(m){return m instanceof e?m:new e(function(n){n(m)})}return new (e||(e=Promise))(function(m,n){function q(p){try{l(h.next(p))}catch(t){n(t)}}function r(p){try{l(h["throw"](p))}catch(t){n(t)}}function l(p){p.done?m(p.value):g(p.value).then(q,r)}l((h=h.apply(a,c||[])).next())})};
Object.defineProperty(auth,"__esModule",{value:!0});auth.PersonalAccessTokenCredentialHandler=auth.BearerCredentialHandler=auth.BasicCredentialHandler=void 0;
class BasicCredentialHandler{constructor(a,c){this.username=a;this.password=c}prepareRequest(a){if(!a.headers)throw Error("The request has no headers");a.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return __awaiter(this,void 0,void 0,function*(){throw Error("not implemented");})}}auth.BasicCredentialHandler=BasicCredentialHandler;
class BearerCredentialHandler{constructor(a){this.token=a}prepareRequest(a){if(!a.headers)throw Error("The request has no headers");a.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return __awaiter(this,void 0,void 0,function*(){throw Error("not implemented");})}}auth.BearerCredentialHandler=BearerCredentialHandler;
class PersonalAccessTokenCredentialHandler{constructor(a){this.token=a}prepareRequest(a){if(!a.headers)throw Error("The request has no headers");a.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return __awaiter(this,void 0,void 0,function*(){throw Error("not implemented");})}}auth.PersonalAccessTokenCredentialHandler=PersonalAccessTokenCredentialHandler;var hasRequiredOidcUtils;
function requireOidcUtils(){if(hasRequiredOidcUtils)return oidcUtils;hasRequiredOidcUtils=1;var a=commonjsGlobal&&commonjsGlobal.__awaiter||function(m,n,q,r){function l(p){return p instanceof q?p:new q(function(t){t(p)})}return new (q||(q=Promise))(function(p,t){function A(z){try{B(r.next(z))}catch(G){t(G)}}function E(z){try{B(r["throw"](z))}catch(G){t(G)}}function B(z){z.done?p(z.value):l(z.value).then(A,E)}B((r=r.apply(m,n||[])).next())})};Object.defineProperty(oidcUtils,"__esModule",{value:!0});
oidcUtils.OidcClient=void 0;let c=lib,e=auth,h=requireCore();class g{static createHttpClient(m=!0,n=10){m={allowRetries:m,maxRetries:n};return new c.HttpClient("actions/oidc-client",[new e.BearerCredentialHandler(g.getRequestToken())],m)}static getRequestToken(){let m=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!m)throw Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return m}static getIDTokenUrl(){let m=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!m)throw Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");
return m}static getCall(m){var n;return a(this,void 0,void 0,function*(){let q=null===(n=(yield g.createHttpClient().getJson(m).catch(r=>{throw Error(`Failed to get ID Token. \n 
        Error Code : ${r.statusCode}\n 
        Error Message: ${r.result.message}`);})).result)||void 0===n?void 0:n.value;if(!q)throw Error("Response json body do not have ID Token field");return q})}static getIDToken(m){return a(this,void 0,void 0,function*(){try{let n=g.getIDTokenUrl();if(m){let r=encodeURIComponent(m);n=`${n}&audience=${r}`}h.debug(`ID token url is ${n}`);let q=yield g.getCall(n);h.setSecret(q);return q}catch(n){throw Error(`Error message: ${n.message}`);}})}}oidcUtils.OidcClient=g;return oidcUtils}
var summary={},hasRequiredSummary;
function requireSummary(){if(hasRequiredSummary)return summary;hasRequiredSummary=1;(function(a){var c=commonjsGlobal&&commonjsGlobal.__awaiter||function(l,p,t,A){function E(B){return B instanceof t?B:new t(function(z){z(B)})}return new (t||(t=Promise))(function(B,z){function G(b){try{H(A.next(b))}catch(d){z(d)}}function I(b){try{H(A["throw"](b))}catch(d){z(d)}}function H(b){b.done?B(b.value):E(b.value).then(G,I)}H((A=A.apply(l,p||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0});a.summary=
a.markdownSummary=a.SUMMARY_DOCS_URL=a.SUMMARY_ENV_VAR=void 0;let e=require$$0,h=require$$0$1,{access:g,appendFile:m,writeFile:n}=h.promises;a.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";a.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";class q{constructor(){this._buffer=""}filePath(){return c(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let l=process.env[a.SUMMARY_ENV_VAR];if(!l)throw Error(`Unable to find environment variable for $${a.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);
try{yield g(l,h.constants.R_OK|h.constants.W_OK)}catch(p){throw Error(`Unable to access summary file: '${l}'. Check if the file has correct read/write permissions.`);}return this._filePath=l})}wrap(l,p,t={}){t=Object.entries(t).map(([A,E])=>` ${A}="${E}"`).join("");return p?`<${l}${t}>${p}</${l}>`:`<${l}${t}>`}write(l){return c(this,void 0,void 0,function*(){let p=!(null===l||void 0===l||!l.overwrite),t=yield this.filePath();yield(p?n:m)(t,this._buffer,{encoding:"utf8"});return this.emptyBuffer()})}clear(){return c(this,
void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return 0===this._buffer.length}emptyBuffer(){this._buffer="";return this}addRaw(l,p=!1){this._buffer+=l;return p?this.addEOL():this}addEOL(){return this.addRaw(e.EOL)}addCodeBlock(l,p){p=Object.assign({},p&&{lang:p});l=this.wrap("pre",this.wrap("code",l),p);return this.addRaw(l).addEOL()}addList(l,p=!1){p=p?"ol":"ul";l=l.map(t=>this.wrap("li",t)).join("");l=this.wrap(p,l);return this.addRaw(l).addEOL()}addTable(l){l=
l.map(p=>{p=p.map(t=>{if("string"===typeof t)return this.wrap("td",t);const {header:A,data:E,colspan:B,rowspan:z}=t;t=A?"th":"td";const G=Object.assign(Object.assign({},B&&{colspan:B}),z&&{rowspan:z});return this.wrap(t,E,G)}).join("");return this.wrap("tr",p)}).join("");l=this.wrap("table",l);return this.addRaw(l).addEOL()}addDetails(l,p){l=this.wrap("details",this.wrap("summary",l)+p);return this.addRaw(l).addEOL()}addImage(l,p,t){let {width:A,height:E}=t||{};t=Object.assign(Object.assign({},A&&
{width:A}),E&&{height:E});l=this.wrap("img",null,Object.assign({src:l,alt:p},t));return this.addRaw(l).addEOL()}addHeading(l,p){p=`h${p}`;p="h1 h2 h3 h4 h5 h6".split(" ").includes(p)?p:"h1";l=this.wrap(p,l);return this.addRaw(l).addEOL()}addSeparator(){let l=this.wrap("hr",null);return this.addRaw(l).addEOL()}addBreak(){let l=this.wrap("br",null);return this.addRaw(l).addEOL()}addQuote(l,p){p=Object.assign({},p&&{cite:p});l=this.wrap("blockquote",l,p);return this.addRaw(l).addEOL()}addLink(l,p){l=
this.wrap("a",l,{href:p});return this.addRaw(l).addEOL()}}let r=new q;a.markdownSummary=r;a.summary=r})(summary);return summary}var pathUtils={},hasRequiredPathUtils;
function requirePathUtils(){if(hasRequiredPathUtils)return pathUtils;hasRequiredPathUtils=1;var a=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(g,m,n,q){void 0===q&&(q=n);Object.defineProperty(g,q,{enumerable:!0,get:function(){return m[n]}})}:function(g,m,n,q){void 0===q&&(q=n);g[q]=m[n]}),c=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(g,m){Object.defineProperty(g,"default",{enumerable:!0,value:m})}:function(g,m){g["default"]=m}),e=commonjsGlobal&&
commonjsGlobal.__importStar||function(g){if(g&&g.__esModule)return g;var m={};if(null!=g)for(var n in g)"default"!==n&&Object.hasOwnProperty.call(g,n)&&a(m,g,n);c(m,g);return m};Object.defineProperty(pathUtils,"__esModule",{value:!0});pathUtils.toPlatformPath=pathUtils.toWin32Path=pathUtils.toPosixPath=void 0;let h=e(require$$0$2);pathUtils.toPosixPath=function(g){return g.replace(/[\\]/g,"/")};pathUtils.toWin32Path=function(g){return g.replace(/[/]/g,"\\")};pathUtils.toPlatformPath=function(g){return g.replace(/[/\\]/g,
h.sep)};return pathUtils}var hasRequiredCore;
function requireCore(){if(hasRequiredCore)return core;hasRequiredCore=1;(function(a){function c(b,d){let f=process.env[`INPUT_${b.replace(/ /g,"_").toUpperCase()}`]||"";if(d&&d.required&&!f)throw Error(`Input required and not supplied: ${b}`);return d&&!1===d.trimWhitespace?f:f.trim()}function e(b,d={}){l.issueCommand("error",t.toCommandProperties(d),b instanceof Error?b.toString():b)}function h(b){l.issue("group",b)}function g(){l.issue("endgroup")}var m=commonjsGlobal&&commonjsGlobal.__createBinding||
(Object.create?function(b,d,f,k){void 0===k&&(k=f);Object.defineProperty(b,k,{enumerable:!0,get:function(){return d[f]}})}:function(b,d,f,k){void 0===k&&(k=f);b[k]=d[f]}),n=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(b,d){Object.defineProperty(b,"default",{enumerable:!0,value:d})}:function(b,d){b["default"]=d}),q=commonjsGlobal&&commonjsGlobal.__importStar||function(b){if(b&&b.__esModule)return b;var d={};if(null!=b)for(var f in b)"default"!==f&&Object.hasOwnProperty.call(b,
f)&&m(d,b,f);n(d,b);return d},r=commonjsGlobal&&commonjsGlobal.__awaiter||function(b,d,f,k){function y(u){return u instanceof f?u:new f(function(v){v(u)})}return new (f||(f=Promise))(function(u,v){function D(w){try{C(k.next(w))}catch(F){v(F)}}function x(w){try{C(k["throw"](w))}catch(F){v(F)}}function C(w){w.done?u(w.value):y(w.value).then(D,x)}C((k=k.apply(b,d||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0});a.getIDToken=a.getState=a.saveState=a.group=a.endGroup=a.startGroup=a.info=
a.notice=a.warning=a.error=a.debug=a.isDebug=a.setFailed=a.setCommandEcho=a.setOutput=a.getBooleanInput=a.getMultilineInput=a.getInput=a.addPath=a.setSecret=a.exportVariable=a.ExitCode=void 0;let l=command,p=fileCommand,t=utils,A=q(require$$0),E=q(require$$0$2),B=requireOidcUtils();var z;(function(b){b[b.Success=0]="Success";b[b.Failure=1]="Failure"})(z=a.ExitCode||(a.ExitCode={}));a.exportVariable=function(b,d){let f=t.toCommandValue(d);process.env[b]=f;if(process.env.GITHUB_ENV)return p.issueFileCommand("ENV",
p.prepareKeyValueMessage(b,d));l.issueCommand("set-env",{name:b},f)};a.setSecret=function(b){l.issueCommand("add-mask",{},b)};a.addPath=function(b){process.env.GITHUB_PATH?p.issueFileCommand("PATH",b):l.issueCommand("add-path",{},b);process.env.PATH=`${b}${E.delimiter}${process.env.PATH}`};a.getInput=c;a.getMultilineInput=function(b,d){b=c(b,d).split("\n").filter(f=>""!==f);return d&&!1===d.trimWhitespace?b:b.map(f=>f.trim())};a.getBooleanInput=function(b,d){d=c(b,d);if(["true","True","TRUE"].includes(d))return!0;
if(["false","False","FALSE"].includes(d))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${b}\n`+"Support boolean input list: `true | True | TRUE | false | False | FALSE`");};a.setOutput=function(b,d){if(process.env.GITHUB_OUTPUT)return p.issueFileCommand("OUTPUT",p.prepareKeyValueMessage(b,d));process.stdout.write(A.EOL);l.issueCommand("set-output",{name:b},t.toCommandValue(d))};a.setCommandEcho=function(b){l.issue("echo",b?"on":"off")};a.setFailed=function(b){process.exitCode=
z.Failure;e(b)};a.isDebug=function(){return"1"===process.env.RUNNER_DEBUG};a.debug=function(b){l.issueCommand("debug",{},b)};a.error=e;a.warning=function(b,d={}){l.issueCommand("warning",t.toCommandProperties(d),b instanceof Error?b.toString():b)};a.notice=function(b,d={}){l.issueCommand("notice",t.toCommandProperties(d),b instanceof Error?b.toString():b)};a.info=function(b){process.stdout.write(b+A.EOL)};a.startGroup=h;a.endGroup=g;a.group=function(b,d){return r(this,void 0,void 0,function*(){h(b);
let f;try{f=yield d()}finally{g()}return f})};a.saveState=function(b,d){if(process.env.GITHUB_STATE)return p.issueFileCommand("STATE",p.prepareKeyValueMessage(b,d));l.issueCommand("save-state",{name:b},t.toCommandValue(d))};a.getState=function(b){return process.env[`STATE_${b}`]||""};a.getIDToken=function(b){return r(this,void 0,void 0,function*(){return yield B.OidcClient.getIDToken(b)})};var G=requireSummary();Object.defineProperty(a,"summary",{enumerable:!0,get:function(){return G.summary}});var I=
requireSummary();Object.defineProperty(a,"markdownSummary",{enumerable:!0,get:function(){return I.markdownSummary}});var H=requirePathUtils();Object.defineProperty(a,"toPosixPath",{enumerable:!0,get:function(){return H.toPosixPath}});Object.defineProperty(a,"toWin32Path",{enumerable:!0,get:function(){return H.toWin32Path}});Object.defineProperty(a,"toPlatformPath",{enumerable:!0,get:function(){return H.toPlatformPath}})})(core);return core}var coreExports=requireCore();
function check(a,c){a=JSON.parse(require$$0$1.readFileSync(a,"utf8")).volta.node;coreExports.debug(`volta_node_version: ${a}`);c=require$$0$1.readFileSync(c,"utf8").replace(/\r?\n/g,"");coreExports.debug(`node_version_version: ${c}`);if(a!==c)throw Error(`volta node version ${a} does not match .node_version version ${c}`);return c}
function run(){try{let a=coreExports.getInput("package_json_path"),c=coreExports.getInput("node_version_path");coreExports.setOutput("version",check(a,c));coreExports.info("volta node version matches .node_version version")}catch(a){a instanceof Error&&coreExports.setFailed(a.message)}}run()
